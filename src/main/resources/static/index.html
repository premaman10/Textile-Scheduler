<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textile Optimizer</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Top Navigation -->
        <header class="top-nav">
            <div class="nav-brand">
                <div class="logo-icon"></div>
                <span>Textile Optimizer</span>
            </div>
            <nav class="nav-links">
                <a href="#" class="nav-link active" data-tab="dashboard">Dashboard</a>
                <a href="#" class="nav-link" data-tab="orders">Orders</a>
                <a href="#" class="nav-link" data-tab="schedule">Schedule</a>
                <a href="#" class="nav-link" data-tab="simulations">Simulation</a>
            </nav>
            <div class="nav-user">
                <span class="user-name">Aman</span>
                <div class="user-avatar">A</div>
                <form action="/logout" method="post" style="margin-left: 1rem;">
                    <button type="submit" class="btn btn-secondary"
                        style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">Logout</button>
                </form>
            </div>
        </header>

        <!-- Main Content -->
        <main class="content">
            <!-- Dashboard View -->
            <div id="dashboardTab" class="tab-content active">
                <div class="view-header">
                    <h1>Dashboard</h1>
                    <div class="header-actions">
                        <button id="simulateBtn" class="btn btn-primary">
                            <i data-lucide="zap" style="width:16px; margin-right:5px; vertical-align:text-bottom;"></i>
                            Peak Simulation
                        </button>
                        <button id="generateBtn" class="btn btn-primary" style="background: #0f172a;">
                            <i data-lucide="play" style="width:16px; margin-right:5px; vertical-align:text-bottom;"></i>
                            Generate Optimized
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-label">COMPLIANCE</span>
                        <span class="stat-value" id="complianceValue">0%</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">EFFICIENCY</span>
                        <span class="stat-value" id="efficiencyValue">0%</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">CLEANING SAVED</span>
                        <span class="stat-value" id="cleaningSavedValue">0m</span>
                    </div>
                </div>

                <div class="chart-section card">
                    <h3>Cleaning Downtime Optimization</h3>
                    <div class="chart-wrapper">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                </div>

                <div class="alerts-section card">
                    <h3>Factory Alerts</h3>
                    <div id="activityFeed" class="activity-feed">
                        <div class="empty-state">No recent alerts.</div>
                    </div>
                </div>
            </div>

            <!-- Schedule View -->
            <div id="scheduleTab" class="tab-content">
                <div class="view-header">
                    <h1>Production Schedule</h1>
                    <div class="header-actions">
                        <button id="openAddOrderBtn" class="btn btn-secondary">Add Orders</button>
                        <button id="optimizeBtn" class="btn btn-primary">Optimize Schedule</button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-label">OPTIMIZED CLEANING</span>
                        <span class="stat-value" id="optCleaningVal">--</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">FIFO CLEANING</span>
                        <span class="stat-value" id="fifoCleaningVal">--</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">CLEANING SAVED</span>
                        <span class="stat-value" id="cleaningSavedVal2">--</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">MACHINE EFFICIENCY</span>
                        <span class="stat-value" id="effVal2">--</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">DEADLINE COMPLIANCE</span>
                        <span class="stat-value" id="compVal2">--</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-label">EXTRA CAPACITY</span>
                        <span class="stat-value">0 orders</span>
                    </div>
                </div>

                <div class="schedule-table-container card">
                    <h3>Optimized Schedule</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Order</th>
                                <th>Color</th>
                                <th>Family</th>
                                <th>Deadline</th>
                                <th>Cleaning (min)</th>
                            </tr>
                        </thead>
                        <tbody id="timelineBody">
                            <!-- Rows will be injected here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Orders View -->
            <div id="ordersTab" class="tab-content">
                <div class="view-header">
                    <h1>Create Orders</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="switchTab('schedule')">
                            <i data-lucide="calendar"></i> View Schedule
                        </button>
                    </div>
                </div>

                <div class="order-form-container card">
                    <div class="form-header">
                        <div class="icon-box orange"><i data-lucide="plus"></i></div>
                        <div class="text">
                            <h3>New Order</h3>
                            <p>Fill in the details below</p>
                        </div>
                    </div>
                    <form id="orderForm" class="grid-form">
                        <div class="form-group">
                            <label>Order name</label>
                            <input type="text" id="colorNameField" placeholder="e.g. ORD-001" required>
                        </div>
                        <div class="form-group">
                            <label>Color</label>
                            <input type="text" id="colorValueField" placeholder="e.g. Navy Blue, Pastel Pink" required>
                        </div>
                        <div class="form-group">
                            <label>Color family</label>
                            <div class="family-selector">
                                <button type="button" class="family-btn" data-family="WHITE">White</button>
                                <button type="button" class="family-btn active"
                                    data-family="LIGHT_COLORS">Light</button>
                                <button type="button" class="family-btn" data-family="MEDIUM_COLORS">Medium</button>
                                <button type="button" class="family-btn" data-family="DARK_COLORS">Dark</button>
                                <button type="button" class="family-btn" data-family="BLACKS_DEEP_DARKS">Black</button>
                                <input type="hidden" id="colorFamilyField" value="LIGHT_COLORS">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Quantity (meters)</label>
                            <div class="input-with-unit">
                                <input type="number" id="quantityField" min="100" max="1000" value="100" required>
                                <span class="unit">m</span>
                            </div>
                            <span class="hint">100 - 1000 meters</span>
                        </div>
                        <div class="form-group">
                            <label>Deadline</label>
                            <input type="datetime-local" id="deadlineDate" required>
                            <input type="hidden" id="deadlineField">
                        </div>
                        <div class="form-group">
                            <label>Order type</label>
                            <div class="type-selector">
                                <button type="button" class="type-btn" data-type="RUSH">Rush (8-12 hrs)</button>
                                <button type="button" class="type-btn active" data-type="STANDARD">Standard (24-48
                                    hrs)</button>
                                <button type="button" class="type-btn" data-type="BULK">Bulk (48+ hrs)</button>
                                <input type="hidden" id="orderTypeField" value="STANDARD">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary btn-large">Create order</button>
                        </div>
                    </form>
                </div>

                <div class="order-list-container card" style="margin-top: 2rem;">
                    <div class="section-header">
                        <h3>Factory Orders</h3>
                        <span id="capacityLabel">Capacity: 0/1000</span>
                        <button id="clearOrdersBtn" class="btn btn-secondary-danger">Clear All</button>
                    </div>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Color</th>
                                <th>Family</th>
                                <th>Qty (m)</th>
                                <th>Type</th>
                                <th>Deadline</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="orderTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Simulation Stats View -->
            <div id="simulationsTab" class="tab-content">
                <div class="view-header">
                    <h1>Simulation Stats</h1>
                </div>
                <div id="simHistoryList" class="sim-grid">
                    <!-- Simulation Run Cards -->
                </div>
            </div>
        </main>
    </div>

    <!-- Simulation Detail Modal -->
    <div id="simDetailModal" class="modal-overlay" style="display: none;">
        <div class="modal-content card">
            <div class="modal-header">
                <h2 id="simDetailTitle">Simulation Data</h2>
                <button id="closeSimModal" class="btn btn-secondary">Close</button>
            </div>
            <div class="modal-body">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Color</th>
                            <th>Qty</th>
                            <th>Type</th>
                            <th>Deadline</th>
                            <th>Received At</th>
                            <th>Scheduled For</th>
                        </tr>
                    </thead>
                    <tbody id="simDetailBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>